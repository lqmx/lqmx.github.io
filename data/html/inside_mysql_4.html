<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="update_time" content="1520086366">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MySQL技术内幕 第四章 表</title>
    <link rel="shortcut icon" type="images/x-icon" href="/favicon.png?v1520086366">
    <link rel="stylesheet" href="../../css/reset.css?v1520086366">
    <link rel="stylesheet" href="../../css/md.css?v1520086366">
    <link rel="stylesheet" href="../../css/module.css?v1520086366">
    <link rel="stylesheet" href="../../css/c.css?v1520086366">
    <link rel="stylesheet" href="../../dep/highlight/style/monokai_sublime.css?v1520086366">
    <script src="../../dep/require.js?1520086366"></script>
</head>
<body>
    <div class="md"><h1>第四章 表</h1>
<h6>2018.03.03</h6>
<h2>4.1 索引组织表</h2>
<p>InnoDB中,表都是根据主键顺序组织存放的,这种存储方式的表称为索引组织表。</p>
<p>每张表都有个主键,在创建表时如果没有显示定义主键,则会按如下方式选择或创建主键</p>
<ul>
<li>判断是否由非空的唯一索引,如果有则该列为主键</li>
<li>不符合上面条件,自动创建一个6字节大小的指针</li>
</ul>
<p>当表中有多个非空唯一索引时,将选择建表时第一个定义的非空唯一索引为主键。</p>
<h2>4.2 InnoDB逻辑存储结构</h2>
<p>所有数据都被逻辑地存放在一个空间中,称之为表空间,表空间又由段、区、页组成。</p>
<h3>4.2.1 表空间</h3>
<p>表空间内存放的只是数据、索引和插入缓冲Bitmap页,其他类的数据,如回滚信息,插入缓冲索引页、
系统事务信息,二次写缓冲等还是存放在原来的共享表空间内。</p>
<h3>4.2.2 段</h3>
<p>常见的段有数据段、索引段、回滚段等。</p>
<h3>4.2.3 区</h3>
<p>区是有连续页组成的空间,在任何情况下每个区的大小都为1MB。</p>
<p>在每个段开始时,先用32个大小的碎片页来存放数据,再使用完这些页之后才是64个连续页的申请。
这样做的目的是,对于一些小表,或是undo这类的段,可以在开始时申请较少的空间,节省磁盘容量的开销。</p>
<h3>4.2.4 页</h3>
<p>页是InnoDB磁盘管理的最小单位。</p>
<p>页的类型有:</p>
<ul>
<li>数据页</li>
<li>undo页</li>
<li>系统页</li>
<li>事务数据页</li>
<li>插入缓冲位图页</li>
<li>插入缓冲空闲列表页</li>
<li>未压缩的二进制大对象页</li>
<li>压缩的二进制大对象页</li>
</ul>
<h3>4.2.5 行</h3>
<p>InnoDB是面向列的,也就是说数据是按行进行存放的。每个页存放的行记录也是有硬性定义的,最多允许
存放16KB/2-200行记录,即7992行记录。</p>
<h2>4.3 InnoDB行记录格式</h2>
<h6>2018.03.03</h6></div>
<script >
    requirejs(['../../js/conf/r'], function(rc) {
        requirejs(['../js/html']);
    });
</script>
</body>
</html>