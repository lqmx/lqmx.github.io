# RequireJs学习笔记

###### 20180211

RequireJs是一个JavaScript文件和模块加载器。
采用模块化脚本加载器像RequireJS将提高速度和代码质量。

## RequireJs的用法

1. 获取RequireJs

[下载链接](http://requirejs.org/docs/download.html)

2. 添加RequireJs

```html
<!DOCTYPE html>
<!--
    project.html
    scripts/
        main.js
        require.js
        helper/
            util.js
-->
<html>
    <head>
        <title>My Sample Project</title>
        <!-- data-main attribute tells require.js to load
             scripts/main.js after require.js loads. -->
        <script data-main="scripts/main" src="scripts/require.js"></script>
    </head>
    <body>
        <h1>My Sample Project</h1>
        <script>
            requirejs(["helper/util"], function(util) {
                //This function is called when scripts/helper/util.js is loaded.
                //If util.js calls define(), then this function is not fired until
                //util's dependencies have loaded, and the util argument will hold
                //the module value for "helper/util".
            });
        </script>
    </body>
</html>
```

3. 优化

压缩合并依赖文件

4. 栗子

+ [create-template](https://github.com/volojs/create-template)

```txt#目录结构
create-template/
    app/
        main.js
        messages.js
    lib/
        print.js
        require.js
    app.js
    index.html
```

```html#index.html
<!DOCTYPE html>
<html>
    <head>
        <script data-main="app" src="lib/require.js"></script>
    </head>
    <body>
        <h1>Hello World</h1>
    </body>
</html>
```

```js#app.js
// For any third party dependencies, like jQuery, place them in the lib folder.

// Configure loading modules from the lib directory,
// except for 'app' ones, which are in a sibling
// directory.
requirejs.config({
    baseUrl: 'lib',
    paths: {
        app: '../app'
    }
});

// Start loading the main app file. Put all of
// your application logic in there.
requirejs(['app/main']);
```

```js#app/main.js
define(function (require) {
    // Load any app-specific modules
    // with a relative require call,
    // like:
    var messages = require('./messages');

    // Load library/vendor modules using
    // full IDs, like:
    var print = require('print');

    print(messages.getHello());
});

```

```js#app/messages.js
define(function () {
    return {
        getHello: function () {
            return 'Hello World';
        }
    };
});

```

```js#lib/print.js
define(function () {
    return function print(msg) {
        console.log(msg);
    };
});

```

+ [example-multipage](https://github.com/requirejs/example-multipage)
+ [example-multipage-shim](https://github.com/requirejs/example-multipage-shim)

## 参考

[RequireJs](http://requirejs.org/)

###### 20180211